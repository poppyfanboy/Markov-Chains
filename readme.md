# чего

## оглавление

- [чего](#чего)
  - [оглавление](#оглавление)
  - [верхний блок](#верхний-блок)
  - [список источников](#список-источников)
    - [фильтры](#фильтры)
    - [ограничение на количество слов/символов](#ограничение-на-количество-словсимволов)
    - [вероятность источника](#вероятность-источника)
    - [произвольный сайт в качестве источника](#произвольный-сайт-в-качестве-источника)

## верхний блок

Когда нажимаешь на "по N-граммам", выводится дополнительная штука для выбора размера N-грамм.

Наверное, неправильно брать первую попавшуюся ссылку в введённом тексте, потому что текст сам по себе может содержать ссылки. Лучше, чтобы пользователь сам выбрал, что конкретно он хочет: достать текст по ссылке или использовать то, что введено как источник.

Ссылка на двач" и "произвольная ссылка" должны быть взаимоисключающими.

## список источников

### фильтры

Должен автоматически определять, искать по всей доске или по треду. Если по треду, то по умолчанию берёт просто все посты из треда, но можно нажать на "добавить фильтры" где есть:

- поиск по имени (без/с регекспом)

- поиск по трипкоду (тоже можно с регекспом, я думаю)

- поиск по метке опа, только для поиска по треду

- "содержит слова" или есть хотя бы одно слово, соответствующее регекспу?

Можно попробовать сделать так: можно добавлять любое количество однотипных фильтров и между фильтрами можно вставить "AND" или "OR". И чтобы можно было делать отрицание для фильтров. Так можно будет в теории записать что угодно в ДНФ. Не лучший вариант, нет скобок, но самый простой в реализации и в использовании тоже, я думаю.

И ещё, я думаю, должна быть кнопочка, чтобы выбрать, пользователь хочет применить сразу все фильтры или чтобы прокнулся хотя бы один. Ну то есть, кнопка, которая меняет всё на "AND" или всё на "OR".

### ограничение на количество слов/символов

Если поиск по доске, то обязательно надо добавить хотя бы какой-нибудь фильтр? А если фильтр такой, что для него подходят все посты? В тредах текста не то чтобы может быть супер много, но текст со всей доски сохранять - это уже сомнительно. Возможно, стоит добавить возможность выбрать максимальное количество символов, которые надо съесть, ну там по умолчанию какое-то разумное количество должно стоять. И чтобы можно было выбрать единицу измерения: символы / тысячи символов / слова / тысячи слов. Тысячи просто как k/к после числа реализовать, наверное.

### вероятность источника

Если указан ровно один источник, то не показывать ползунок с выбором вероятности. Если несколько источников, то ползунки должны апдейтиться так, чтобы суммарная вероятность оставалась 1.

### произвольный сайт в качестве источника

Если указывается произвольный сайт, то сделать дополнительно возможность написать querySelector (которому может соответствовать несколько дом элементов), откуда доставать текст. Если querySelector не указан, то смотреть, в каком дом элементе максимальное количество текста?
